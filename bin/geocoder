#!/usr/bin/env node

var GeocoderFactory = require('../lib/geocoderfactory.js');

var args = process.argv.slice(2);

var geocoderOptionIndex = args.indexOf('--provider') + 1;

var geocoderProvider = 'google';

if (geocoderOptionIndex > 0) {
	geocoderProvider = args[geocoderOptionIndex];
}

try {
	var geocoder = GeocoderFactory.getGeocoder(geocoderProvider);	
} catch(e) {
	console.error(e.message);
	process.exit(1);
}

geocoder.geocode(args[args.length - 1])
	.then(function(results) {
		console.log(results);
	}, function(err) {
		console.error(err.message);
		process.exit(1);
	});
